{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, vShow as _vShow, withDirectives as _withDirectives, createTextVNode as _createTextVNode } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"購物車\", -1\n/* HOISTED */\n);\n\nconst _hoisted_2 = {\n  class: \"table align-middle\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"圖片\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"商品名稱\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"價格\"), /*#__PURE__*/_createElementVNode(\"th\")])], -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = {\n  style: {\n    \"width\": \"200px\"\n  }\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"h5\"\n};\nconst _hoisted_6 = {\n  key: 1\n};\nconst _hoisted_7 = {\n  class: \"h6\"\n};\nconst _hoisted_8 = {\n  class: \"h5\"\n};\nconst _hoisted_9 = {\n  class: \"btn-group btn-group-sm\"\n};\nconst _hoisted_10 = [\"onClick\", \"disabled\"];\nconst _hoisted_11 = {\n  class: \"spinner-grow spinner-grow-sm\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_createTextVNode(\" 查看更多 \");\n\nconst _hoisted_13 = [\"onClick\", \"disabled\"];\nconst _hoisted_14 = {\n  class: \"spinner-grow spinner-grow-sm\"\n};\n\nconst _hoisted_15 = /*#__PURE__*/_createTextVNode(\" 加到購物車 \");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createElementVNode(\"table\", _hoisted_2, [_hoisted_3, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.products, product => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: product.id\n    }, [_createElementVNode(\"td\", _hoisted_4, [_createElementVNode(\"div\", {\n      style: _normalizeStyle([{\n        backgroundImage: `url(${product.imageUrl})`\n      }, {\n        \"height\": \"100px\",\n        \"background-size\": \"cover\",\n        \"background-position\": \"center\"\n      }])\n    }, null, 4\n    /* STYLE */\n    )]), _createElementVNode(\"td\", null, _toDisplayString(product.title), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, [product.price === product.origin_price ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _toDisplayString(product.price) + \" 元 \", 1\n    /* TEXT */\n    )) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createElementVNode(\"del\", _hoisted_7, \"原價 \" + _toDisplayString(product.origin_price) + \" 元\", 1\n    /* TEXT */\n    ), _createElementVNode(\"div\", _hoisted_8, \"現在只要 \" + _toDisplayString(product.price) + \" 元\", 1\n    /* TEXT */\n    )]))]), _createElementVNode(\"td\", null, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"button\", {\n      type: \"button\",\n      class: \"btn btn-outline-secondary\",\n      onClick: $event => _ctx.openProductModal(product.id),\n      disabled: _ctx.isLoadingItem === product.id\n    }, [_withDirectives(_createElementVNode(\"span\", _hoisted_11, null, 512\n    /* NEED_PATCH */\n    ), [[_vShow, _ctx.isLoadingItem === product.id]]), _hoisted_12], 8\n    /* PROPS */\n    , _hoisted_10), _createElementVNode(\"button\", {\n      type: \"button\",\n      class: \"btn btn-danger\",\n      onClick: $event => $options.addToCart(product.id),\n      disabled: _ctx.isLoadingItem === product.id\n    }, [_withDirectives(_createElementVNode(\"span\", _hoisted_14, null, 512\n    /* NEED_PATCH */\n    ), [[_vShow, _ctx.isLoadingItem === product.id]]), _hoisted_15], 8\n    /* PROPS */\n    , _hoisted_13)])])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;gCACEA,oBAAY,IAAZ,EAAY,IAAZ,EAAI,KAAJ,EAAO;AAAA;AAAP;;;AACOC,OAAK,EAAC;;;gCACXD,oBAOQ,OAPR,EAOQ,IAPR,EAOQ,cANNA,oBAKK,IALL,EAKK,IALL,EAKK,cAJHA,oBAAW,IAAX,EAAW,IAAX,EAAI,IAAJ,CAIG,eAHHA,oBAAa,IAAb,EAAa,IAAb,EAAI,MAAJ,CAGG,eAFHA,oBAAW,IAAX,EAAW,IAAX,EAAI,IAAJ,CAEG,eADHA,oBAAS,IAAT,CACG,CALL,CAMM,CAPR;;AAAA;;;AAUQE,OAAoB,EAApB;AAAA;AAAA;;;;AAYGD,OAAK,EAAC;;;;;;AAIJA,OAAK,EAAC;;;AACNA,OAAK,EAAC;;;AAIRA,OAAK,EAAC;;;;AAQLA,OAAK,EAAC;;;kDAEA;;;;AAUNA,OAAK,EAAC;;;kDAEA;;;6DAvDpBE,YACAH,oBA6DQ,OA7DR,cA6DQ,CA5DNI,UA4DM,EApDNJ,oBAmDQ,OAnDR,EAmDQ,IAnDR,EAmDQ,oBAlDNK,oBAiDKC,SAjDL,EAiDK,IAjDL,EAiDKC,YAjDiBC,cAiDjB,EAjDMC,OAAmB,IAAZ;yBAAlBJ,oBAiDK,IAjDL,EAiDK;AAjD4BK,SAAG,EAAED,OAAO,CAACE;AAiDzC,KAjDL,GACEX,oBASK,IATL,cASK,CARHA,oBAOO,KAPP,EAOO;AANJE,WAAK;AAAAU,gCAA4BH,OAAO,CAACI,QAAQ;AAA5C,SACN;AAAA;AAAA;AAAA;AAAA,OADM;AAMD,KAPP;;AAAA,KAQG,CATL,GAUAb,oBAA4B,IAA5B,EAA4B,IAA5B,EAA4Bc,iBAArBL,OAAO,CAACM,KAAa,CAA5B,EAAoB;AAAA;AAApB,OACAf,oBAQK,IARL,EAQK,IARL,EAQK,CAPmBS,OAAO,CAACO,KAAR,KAAkBP,OAAO,CAACQ,8BAAhDZ,oBAEM,KAFN,cAEMS,iBADDL,OAAO,CAACO,KACP,IADe,KADrB,EAEA;AAAA;AAFA,wBAGAX,oBAGM,KAHN,EAGMa,UAHN,EAGM,CAFJlB,oBAAqD,KAArD,cAAgB,QAAGc,iBAAGL,OAAO,CAACQ,YAAX,CAAH,GAA6B,IAA7C,EAA+C;AAAA;AAA/C,KAEI,EADJjB,oBAAgD,KAAhD,cAAgB,UAAKc,iBAAGL,OAAO,CAACO,KAAX,CAAL,GAAwB,IAAxC,EAA0C;AAAA;AAA1C,KACI,CAHN,EAIG,CARL,GASAhB,oBA2BK,IA3BL,EA2BK,IA3BL,EA2BK,CA1BHA,oBAyBM,KAzBN,cAyBM,CAxBJA,oBAWS,QAXT,EAWS;AAVPmB,UAAI,EAAC,QAUE;AATPlB,WAAK,EAAC,2BASC;AARNmB,aAAK,YAAEC,sBAAiBZ,OAAO,CAACE,EAAzB,CAQD;AAPNW,cAAQ,EAAED,uBAAkBZ,OAAO,CAACE;AAO9B,KAXT,mBAMEX,oBAGQ,MAHR,eAGQ,IAHR,EAGQ;AAAA;AAHR,OAGQ,UADEqB,uBAAkBZ,OAAO,CAACE,GAC5B,gBATV;;AAAA,kBAwBI,EAZJX,oBAWS,QAXT,EAWS;AAVPmB,UAAI,EAAC,QAUE;AATPlB,WAAK,EAAC,gBASC;AARNmB,aAAK,YAAEG,mBAAUd,OAAO,CAACE,EAAlB,CAQD;AAPNW,cAAQ,EAAED,uBAAkBZ,OAAO,CAACE;AAO9B,KAXT,mBAMEX,oBAGQ,MAHR,eAGQ,IAHR,EAGQ;AAAA;AAHR,OAGQ,UADEqB,uBAAkBZ,OAAO,CAACE,GAC5B,gBATV;;AAAA,kBAYI,CAzBN,CA0BG,CA3BL,EArBF;GAiDK,CAjDL;;AAAA,GAkDM,EAnDR,CAoDM,CA7DR","names":["_createElementVNode","class","style","_hoisted_1","_hoisted_3","_createElementBlock","_Fragment","_renderList","$data","product","key","id","backgroundImage","imageUrl","_toDisplayString","title","price","origin_price","_hoisted_6","type","onClick","_ctx","disabled","$options"],"sourceRoot":"","sources":["/Users/bean/Documents/hexschool/week6-homework/src/views/CartView.vue"],"sourcesContent":["<template>\n  <h2>購物車</h2>\n  <table class=\"table align-middle\">\n    <thead>\n      <tr>\n        <th>圖片</th>\n        <th>商品名稱</th>\n        <th>價格</th>\n        <th></th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"product in products\" :key=\"product.id\">\n        <td style=\"width: 200px\">\n          <div\n            :style=\"{ backgroundImage: `url(${product.imageUrl})` }\"\n            style=\"\n              height: 100px;\n              background-size: cover;\n              background-position: center;\n            \"\n          ></div>\n        </td>\n        <td>{{ product.title }}</td>\n        <td>\n          <div class=\"h5\" v-if=\"product.price === product.origin_price\">\n            {{ product.price }} 元\n          </div>\n          <div v-else>\n            <del class=\"h6\">原價 {{ product.origin_price }} 元</del>\n            <div class=\"h5\">現在只要 {{ product.price }} 元</div>\n          </div>\n        </td>\n        <td>\n          <div class=\"btn-group btn-group-sm\">\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-secondary\"\n              @click=\"openProductModal(product.id)\"\n              :disabled=\"isLoadingItem === product.id\"\n            >\n              <span\n                class=\"spinner-grow spinner-grow-sm\"\n                v-show=\"isLoadingItem === product.id\"\n              ></span>\n              查看更多\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn btn-danger\"\n              @click=\"addToCart(product.id)\"\n              :disabled=\"isLoadingItem === product.id\"\n            >\n              <span\n                class=\"spinner-grow spinner-grow-sm\"\n                v-show=\"isLoadingItem === product.id\"\n              ></span>\n              加到購物車\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      cartData: {},\n      products: [],\n    };\n  },\n\n  methods: {\n    getProducts() {\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`\n        )\n        .then((res) => {\n          console.log(res);\n          this.products = res.data.products;\n        });\n    },\n    //加入購物車 / 參數預設值 qty = 1\n    addToCart(id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty,\n      };\n      this.isLoadingItem = id;\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`, { data }\n        )\n        .then((res) => {\n          console.log(res);\n          this.getCart();\n          this.$refs.productModal.closeModal();\n          this.isLoadingItem = \"\";\n        });\n    },\n  },\n  mounted() {\n    this.getProducts();\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}