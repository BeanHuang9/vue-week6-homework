{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, vShow as _vShow, withDirectives as _withDirectives, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"購物車\", -1\n/* HOISTED */\n);\n\nconst _hoisted_3 = {\n  class: \"table align-middle\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"圖片\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"商品名稱\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"價格\"), /*#__PURE__*/_createElementVNode(\"th\")])], -1\n/* HOISTED */\n);\n\nconst _hoisted_5 = {\n  style: {\n    \"width\": \"200px\"\n  }\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"h5\"\n};\nconst _hoisted_7 = {\n  key: 1\n};\nconst _hoisted_8 = {\n  class: \"h6\"\n};\nconst _hoisted_9 = {\n  class: \"h5\"\n};\nconst _hoisted_10 = {\n  class: \"btn-group btn-group-sm\"\n};\nconst _hoisted_11 = [\"onClick\", \"disabled\"];\nconst _hoisted_12 = {\n  class: \"spinner-grow spinner-grow-sm\"\n};\n\nconst _hoisted_13 = /*#__PURE__*/_createTextVNode(\" 查看更多 \");\n\nconst _hoisted_14 = [\"onClick\", \"disabled\"];\nconst _hoisted_15 = {\n  class: \"spinner-grow spinner-grow-sm\"\n};\n\nconst _hoisted_16 = /*#__PURE__*/_createTextVNode(\" 加到購物車 \");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"table\", _hoisted_3, [_hoisted_4, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.products, product => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: product.id\n    }, [_createElementVNode(\"td\", _hoisted_5, [_createElementVNode(\"div\", {\n      style: _normalizeStyle([{\n        backgroundImage: `url(${product.imageUrl})`\n      }, {\n        \"height\": \"100px\",\n        \"background-size\": \"cover\",\n        \"background-position\": \"center\"\n      }])\n    }, null, 4\n    /* STYLE */\n    )]), _createElementVNode(\"td\", null, _toDisplayString(product.title), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, [product.price === product.origin_price ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _toDisplayString(product.price) + \" 元 \", 1\n    /* TEXT */\n    )) : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"del\", _hoisted_8, \"原價 \" + _toDisplayString(product.origin_price) + \" 元\", 1\n    /* TEXT */\n    ), _createElementVNode(\"div\", _hoisted_9, \"現在只要 \" + _toDisplayString(product.price) + \" 元\", 1\n    /* TEXT */\n    )]))]), _createElementVNode(\"td\", null, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"button\", {\n      type: \"button\",\n      class: \"btn btn-outline-secondary\",\n      onClick: $event => _ctx.openProductModal(product.id),\n      disabled: _ctx.isLoadingItem === product.id\n    }, [_withDirectives(_createElementVNode(\"span\", _hoisted_12, null, 512\n    /* NEED_PATCH */\n    ), [[_vShow, _ctx.isLoadingItem === product.id]]), _hoisted_13], 8\n    /* PROPS */\n    , _hoisted_11), _createElementVNode(\"button\", {\n      type: \"button\",\n      class: \"btn btn-danger\",\n      onClick: $event => $options.addToCart(product.id),\n      disabled: _ctx.isLoadingItem === product.id\n    }, [_withDirectives(_createElementVNode(\"span\", _hoisted_15, null, 512\n    /* NEED_PATCH */\n    ), [[_vShow, _ctx.isLoadingItem === product.id]]), _hoisted_16], 8\n    /* PROPS */\n    , _hoisted_14)])])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","style","_createElementBlock","_hoisted_2","_hoisted_4","_Fragment","_renderList","$data","product","key","id","backgroundImage","imageUrl","_toDisplayString","title","price","origin_price","_hoisted_7","type","onClick","_ctx","disabled","$options"],"sourceRoot":"","sources":["/Users/bean/Documents/hexschool/week6-homework/src/views/CartView.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <h2>購物車</h2>\n    <table class=\"table align-middle\">\n      <thead>\n        <tr>\n          <th>圖片</th>\n          <th>商品名稱</th>\n          <th>價格</th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"product in products\" :key=\"product.id\">\n          <td style=\"width: 200px\">\n            <div\n              :style=\"{ backgroundImage: `url(${product.imageUrl})`}\"\n              style=\"\n                height: 100px;\n                background-size: cover;\n                background-position: center;\n              \"\n            ></div>\n          </td>\n          <td>{{ product.title }}</td>\n          <td>\n            <div\n              class=\"h5\"\n              v-if=\" product.price === product.origin_price\"\n            >\n              {{ product.price }} 元\n            </div>\n            <div v-else>\n              <del class=\"h6\">原價 {{ product.origin_price }} 元</del>\n              <div class=\"h5\">現在只要 {{ product.price }} 元</div>\n            </div>\n          </td>\n          <td>\n            <div class=\"btn-group btn-group-sm\">\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-secondary\"\n                @click=\"openProductModal(product.id)\"\n                :disabled=\" isLoadingItem === product.id \"\n              >\n                <span class=\"spinner-grow spinner-grow-sm\"\n                  v-show=\" isLoadingItem === product.id \"\n                ></span>\n                查看更多\n              </button>\n              <button type=\"button\" class=\"btn btn-danger\" @click=\"addToCart(product.id)\"\n              :disabled=\" isLoadingItem === product.id \">\n                <span class=\"spinner-grow spinner-grow-sm\"\n                  v-show=\" isLoadingItem === product.id \"\n                ></span>\n                加到購物車\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      cartData: {\n        carts: [],\n      },\n      products: [],\n    };\n  },\n\n  methods: {\n    getProducts() {\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`\n        )\n        .then((res) => {\n          console.log(res);\n          this.products = res.data.products;\n        });\n    },\n    //加入購物車 / 參數預設值 qty = 1\n    addToCart(id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty,\n      };\n      this.isLoadingItem = id;\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`,\n          { data }\n        )\n        .then((res) => {\n          console.log(res);\n          this.isLoadingItem = \"\";\n        });\n    },\n  },\n  mounted() {\n    this.getProducts();\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}